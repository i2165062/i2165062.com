<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MrSol — Solana Contract Builder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Styles -->
  <link rel="stylesheet" href="../assets/css/mrsol-builder.css" />
  <link rel="icon" type="image/x-icon" href="../images/PC22.ico" />

  <!-- Favicon / icons (در صورت نیاز مسیر را عوض کن) -->
  <link rel="icon" type="image/x-icon" href="../images/PC22.ico" />
  <meta name="theme-color" content="#05070a" />
</head>

<body class="mrsol-body">
  <div class="mrsol-page">
    <!-- Sidebar -->
    <aside class="mrsol-sidebar">
      <div class="mrsol-logo-block">
        <div class="mrsol-logo-circle">
          <span class="mrsol-logo-letter">M</span>
        </div>
        <div>
          <h2 class="mrsol-logo-title">MrSol Builder</h2>
          <p class="mrsol-logo-sub">Visual Solana contract studio</p>
        </div>
      </div>

      <ol class="mrsol-steps">
        <li class="step-pill active" data-step="1">
          <span class="step-index">01</span>
          <div class="step-text">
            <span class="step-label">Choose template</span>
            <span class="step-desc">Token / staking / vesting...</span>
          </div>
        </li>
        <li class="step-pill" data-step="2">
          <span class="step-index">02</span>
          <div class="step-text">
            <span class="step-label">Enable features</span>
            <span class="step-desc">Taxes, locks, security</span>
          </div>
        </li>
        <li class="step-pill" data-step="3">
          <span class="step-index">03</span>
          <div class="step-text">
            <span class="step-label">Tune parameters</span>
            <span class="step-desc">Supply & percentages</span>
          </div>
        </li>
        <li class="step-pill" data-step="4">
          <span class="step-index">04</span>
          <div class="step-text">
            <span class="step-label">Review & deploy</span>
            <span class="step-desc">Devnet only (safe)</span>
          </div>
        </li>
      </ol>

      <div class="mrsol-sidebar-footer">
        <div class="network-select">
          <label for="networkSelect">Network</label>
          <select id="networkSelect">
            <option value="devnet" selected>Solana Devnet</option>
            <option value="testnet">Solana Testnet</option>
            <option value="mainnet">Solana Mainnet</option>
          </select>
        </div>

        <button id="walletConnectBtn" class="btn wallet-btn">
          Connect Wallet
        </button>

        <button id="faucetBtn" class="btn ghost-btn">
          Get Devnet SOL
        </button>

        <p class="wallet-status" id="walletStatus">
          Wallet:
          <span class="wallet-status-value">Not connected</span>
        </p>
      </div>
    </aside>

    <!-- Main -->
    <main class="mrsol-main">
      <header class="mrsol-header">
        <div>
          <h1>Build your Solana contract visually</h1>
          <p class="subtitle">
            No Rust, no local setup. Configure your contract in the browser —
            MrSol will deploy it to <strong>Solana devnet</strong> and give you
            an explorer link plus downloadable config.
          </p>
        </div>
        <div class="pill-info">
          <span class="pill-dot"></span>
          <span>Phase 1: Devnet only, safe testing environment</span>
        </div>
      </header>

      <section class="mrsol-layout">
        <!-- Steps panel (left) -->
        <div class="mrsol-steps-panel">
          <!-- STEP 1 -->
          <div class="step-panel active" data-step-panel="1">
            <h2 class="panel-title">1. Choose a base template</h2>
            <p class="panel-subtitle">
              Start from a pre-configured contract type. In this phase, the
              backend deploys <strong>SPL token</strong> contracts; other
              templates are coming next.
            </p>

            <div class="template-grid">
              <label class="template-card">
                <input type="radio" name="template" value="spl_token" checked />
                <div class="template-body">
                  <div class="template-badge">Available now</div>
                  <div class="template-title">SPL Token</div>
                  <p>Create a standard Solana token with custom supply.</p>
                  <ul class="template-meta">
                    <li>Mint to your wallet</li>
                    <li>9 decimals</li>
                    <li>Devnet deployment</li>
                  </ul>
                </div>
              </label>

              <label class="template-card disabled">
                <input type="radio" name="template" value="staking" disabled />
                <div class="template-body">
                  <div class="template-badge badge-soon">Soon</div>
                  <div class="template-title">Staking Pool</div>
                  <p>Lock tokens and distribute rewards to stakers.</p>
                  <ul class="template-meta">
                    <li>Dynamic APR</li>
                    <li>Lock periods</li>
                    <li>Penalty rules</li>
                  </ul>
                </div>
              </label>

              <label class="template-card disabled">
                <input type="radio" name="template" value="vesting" disabled />
                <div class="template-body">
                  <div class="template-badge badge-soon">Soon</div>
                  <div class="template-title">Vesting / Team Lock</div>
                  <p>Timelocked release for teams, advisors & investors.</p>
                  <ul class="template-meta">
                    <li>Cliffs & schedules</li>
                    <li>Multiple beneficiaries</li>
                    <li>Transparent unlocks</li>
                  </ul>
                </div>
              </label>

              <label class="template-card disabled">
                <input type="radio" name="template" value="airdrop" disabled />
                <div class="template-body">
                  <div class="template-badge badge-soon">Soon</div>
                  <div class="template-title">Airdrop Engine</div>
                  <p>Distribute tokens to many addresses at once.</p>
                  <ul class="template-meta">
                    <li>CSV import</li>
                    <li>Batch sending</li>
                    <li>Usage limits</li>
                  </ul>
                </div>
              </label>
            </div>
          </div>

          <!-- STEP 2 -->
          <div class="step-panel" data-step-panel="2">
            <h2 class="panel-title">2. Enable add-on features</h2>
            <p class="panel-subtitle">
              Toggle advanced behaviors for your contract. Some options are
              informational for now and will be fully on-chain in later phases.
            </p>

            <div class="feature-grid">
              <label class="feature-card">
                <input type="checkbox" value="transfer_tax" />
                <div class="feature-body">
                  <div class="feature-title">Transfer tax</div>
                  <p>
                    Take a small percentage on each transfer to a treasury
                    wallet.
                  </p>
                  <span class="feature-tag">Meta only · coming on-chain</span>
                </div>
              </label>

              <label class="feature-card">
                <input type="checkbox" value="anti_whale" />
                <div class="feature-body">
                  <div class="feature-title">Anti-whale limits</div>
                  <p>Restrict max wallet size or transfer amount.</p>
                  <span class="feature-tag">Protects early holders</span>
                </div>
              </label>

              <label class="feature-card">
                <input type="checkbox" value="trading_lock" />
                <div class="feature-body">
                  <div class="feature-title">Trading lock window</div>
                  <p>Delay trading for a short period after mint.</p>
                  <span class="feature-tag">Good for fair launches</span>
                </div>
              </label>

              <label class="feature-card">
                <input type="checkbox" value="mint_lock" />
                <div class="feature-body">
                  <div class="feature-title">Mint authority lock</div>
                  <p>Plan to revoke mint authority after deployment.</p>
                  <span class="feature-tag feature-tag-strong">
                    Core security
                  </span>
                </div>
              </label>
            </div>

            <div class="info-callout">
              In this version, the backend always deploys a standard SPL token.
              Feature toggles are stored in your configuration file so you can
              extend the contract later.
            </div>
          </div>

          <!-- STEP 3 -->
          <div class="step-panel" data-step-panel="3">
            <h2 class="panel-title">3. Token parameters</h2>
            <p class="panel-subtitle">
              Define the core properties of your token. All values are applied
              directly during mint on devnet.
            </p>

            <div class="form-grid">
              <div class="form-group">
                <label for="tokenName">Token name</label>
                <input
                  id="tokenName"
                  type="text"
                  placeholder="MrSol Token"
                  maxlength="32"
                />
              </div>

              <div class="form-group">
                <label for="tokenSymbol">Token symbol</label>
                <input
                  id="tokenSymbol"
                  type="text"
                  placeholder="MRSOL"
                  maxlength="10"
                />
              </div>

              <div class="form-group">
                <label for="totalSupply">Total supply</label>
                <div class="range-wrap">
                  <input
                    id="totalSupply"
                    type="range"
                    min="1"
                    max="1000"
                    value="100"
                  />
                  <div class="range-value">
                    <span id="totalSupplyLabel">100</span> M
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="taxPercent">Transfer tax (%)</label>
                <div class="range-wrap">
                  <input
                    id="taxPercent"
                    type="range"
                    min="0"
                    max="15"
                    value="2"
                  />
                  <div class="range-value">
                    <span id="taxPercentLabel">2</span> %
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="bonusPercent">Holder bonus (%)</label>
                <div class="range-wrap">
                  <input
                    id="bonusPercent"
                    type="range"
                    min="0"
                    max="25"
                    value="5"
                  />
                  <div class="range-value">
                    <span id="bonusPercentLabel">5</span> %
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="lockDuration">Suggested lock duration</label>
                <select id="lockDuration">
                  <option value="none">No suggested lock</option>
                  <option value="1m">1 month</option>
                  <option value="3m">3 months</option>
                  <option value="6m">6 months</option>
                  <option value="12m">12 months</option>
                </select>
              </div>
            </div>
          </div>

          <!-- STEP 4 -->
          <div class="step-panel" data-step-panel="4">
            <h2 class="panel-title">4. Review & deploy</h2>
            <p class="panel-subtitle">
              Double-check your configuration, then deploy to Solana devnet.
              You’ll get a token mint address, explorer link and a config file.
            </p>

            <div class="review-grid">
              <div>
                <h3 class="review-title">Configuration summary</h3>
                <ul class="summary-list" id="summaryList">
                  <!-- filled by JS -->
                </ul>

                <div class="safety-box" id="safeModeBox">
                  <div class="safety-header">
                    <span class="safety-dot"></span>
                    <span class="safety-label">Devnet safety mode ON</span>
                  </div>
                  <p class="safety-text">
                    All deployments go to <strong>devnet</strong>. You can test
                    everything without risking real funds.
                  </p>
                </div>
              </div>

              <div class="deploy-box">
                <h3 class="review-title">Deploy to devnet</h3>
                <p class="deploy-text">
                  MrSol backend will:
                </p>
                <ul class="deploy-list">
                  <li>Create an SPL token mint on devnet</li>
                  <li>Mint total supply to your wallet</li>
                  <li>Generate a configuration artifact file</li>
                </ul>

                <button id="deployBtn" class="btn primary-btn">
                  Deploy on Solana devnet
                </button>

                <!-- باکس نمایش آخرین دیپلوی -->
                <div id="deployResult" class="deploy-result">
                  <p class="deploy-result-title">Last deployment</p>
                  <p class="deploy-result-row">
                    Mint address:<br />
                    <span id="deployMint" class="deploy-mono">—</span>
                  </p>
                  <p class="deploy-result-row">
                    Explorer:<br />
                    <a
                      id="deployExplorerLink"
                      href="#"
                      target="_blank"
                      rel="noopener"
                      class="deploy-link"
                    >—</a>
                  </p>
                  <p class="deploy-result-row">
                    Download config:<br />
                    <a
                      id="deployDownloadLink"
                      href="#"
                      target="_blank"
                      rel="noopener"
                      class="deploy-link"
                    >—</a>
                  </p>
                </div>

                <p class="deploy-note">
                  After deployment you’ll see:
                  <br />• Token mint address<br />
                  • Solana explorer link<br />
                  • Download link for the config file
                </p>
              </div>
            </div>

            <div class="step-nav">
              <button id="prevStepBtn" class="btn ghost-btn" disabled>
                ‹ Back
              </button>
              <button id="nextStepBtn" class="btn primary-btn">
                Next step
              </button>
            </div>
          </div>
        </div>

        <!-- Preview (right) -->
        <aside class="mrsol-preview">
          <h3>Live configuration preview</h3>
          <p class="preview-sub">
            This panel updates as you adjust values and enable features.
          </p>

          <div class="preview-card" id="previewCard">
            <div class="preview-header">
              <div>
                <p class="preview-token-name" id="previewTokenName">
                  MrSol Token
                </p>
                <p class="preview-token-symbol" id="previewTokenSymbol">
                  MRSOL · 9 decimals
                </p>
              </div>
              <span class="preview-chip" id="previewTemplateLabel">
                SPL Token
              </span>
            </div>

            <div class="preview-row">
              <span>Total supply</span>
              <span id="previewSupply">100 M</span>
            </div>

            <div class="preview-row">
              <span>Transfer tax</span>
              <span id="previewTax">2%</span>
            </div>

            <div class="preview-row">
              <span>Holder bonus</span>
              <span id="previewBonus">5%</span>
            </div>

            <div class="preview-row">
              <span>Suggested lock</span>
              <span id="previewLock">No suggested lock</span>
            </div>

            <div class="preview-divider"></div>

            <p class="preview-flags-title">Feature flags</p>
            <ul class="preview-flags" id="previewFeatures">
              <!-- JS fills based on toggles -->
            </ul>

            <div class="preview-footer">
              <span class="preview-network" id="previewNetwork">
                Target: Solana devnet
              </span>
              <span class="preview-wallet" id="previewWallet">
                Wallet: not connected
              </span>
            </div>
          </div>
        </aside>
      </section>
    </main>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast">
    <div class="toast-body" id="toastBody"></div>
  </div>

  <script src="../assets/js/mrsol-builder.js"></script>
</body>
</html>
